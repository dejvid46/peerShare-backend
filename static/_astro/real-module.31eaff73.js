import{r as l,$ as w}from"./index.d496d5ee.js";import{h as x}from"./UseWebSocket.b87fe84a.js";class L{getStringForLocale(e,t){let a=this.strings[t];a||(a=S(t,this.strings,this.defaultLocale),this.strings[t]=a);let n=a[e];if(!n)throw new Error(`Could not find intl message ${e} in ${t} locale`);return n}constructor(e,t="en-US"){this.strings={...e},this.defaultLocale=t}}function S(r,e,t="en-US"){if(e[r])return e[r];let a=F(r);if(e[a])return e[a];for(let n in e)if(n.startsWith(a+"-"))return e[n];return e[t]}function F(r){return Intl.Locale?new Intl.Locale(r).language:r.split("-")[0]}const p=new Map,b=new Map;class D{format(e,t){let a=this.strings.getStringForLocale(e,this.locale);return typeof a=="function"?a(t,this):a}plural(e,t,a="cardinal"){let n=t["="+e];if(n)return typeof n=="function"?n():n;let i=this.locale+":"+a,o=p.get(i);o||(o=new Intl.PluralRules(this.locale,{type:a}),p.set(i,o));let s=o.select(e);return n=t[s]||t.other,typeof n=="function"?n():n}number(e){let t=b.get(this.locale);return t||(t=new Intl.NumberFormat(this.locale),b.set(this.locale,t)),t.format(e)}select(e,t){let a=e[t]||e.other;return typeof a=="function"?a():a}constructor(e,t){this.locale=e,this.strings=t}}let u=new Map,d=!1;try{d=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let c=!1;try{c=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const g={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class R{format(e){let t="";if(!d&&this.options.signDisplay!=null?t=P(this.numberFormatter,this.options.signDisplay,e):t=this.numberFormatter.format(e),this.options.style==="unit"&&!c){var a;let{unit:n,unitDisplay:i="short",locale:o}=this.resolvedOptions(),s=(a=g[n])===null||a===void 0?void 0:a[i];t+=s[o]||s.default}return t}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,t){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.format(e)} – ${this.format(t)}`}formatRangeToParts(e,t){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let a=this.numberFormatter.formatToParts(e),n=this.numberFormatter.formatToParts(t);return[...a.map(i=>({...i,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...n.map(i=>({...i,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!d&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!c&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,t={}){this.numberFormatter=E(e,t),this.options=t}}function E(r,e={}){let{numberingSystem:t}=e;if(t&&r.indexOf("-u-nu-")===-1&&(r=`${r}-u-nu-${t}`),e.style==="unit"&&!c){var a;let{unit:o,unitDisplay:s="short"}=e;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((a=g[o])===null||a===void 0)&&a[s]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${s}`);e={...e,style:"decimal"}}let n=r+(e?Object.entries(e).sort((o,s)=>o[0]<s[0]?-1:1).join():"");if(u.has(n))return u.get(n);let i=new Intl.NumberFormat(r,e);return u.set(n,i),i}function P(r,e,t){if(e==="auto")return r.format(t);if(e==="never")return r.format(Math.abs(t));{let a=!1;if(e==="always"?a=t>0||Object.is(t,0):e==="exceptZero"&&(Object.is(t,-0)||Object.is(t,0)?t=Math.abs(t):a=t>0),a){let n=r.format(-t),i=r.format(t),o=n.replace(i,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),n.replace(i,"!!!").replace(o,"+").replace("!!!",i)}else return r.format(t)}}const C=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),M=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function O(r){if(Intl.Locale){let t=new Intl.Locale(r).maximize().script;return C.has(t)}let e=r.split("-")[0];return M.has(e)}function y(){let r=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([r])}catch{r="en-US"}return{locale:r,direction:O(r)?"rtl":"ltr"}}let $=y(),f=new Set;function h(){$=y();for(let r of f)r($)}function I(){let r=x(),[e,t]=l.useState($);return l.useEffect(()=>(f.size===0&&window.addEventListener("languagechange",h),f.add(t),()=>{f.delete(t),f.size===0&&window.removeEventListener("languagechange",h)}),[]),r?{locale:"en-US",direction:"ltr"}:e}const T=w.createContext(null);function v(){let r=I();return l.useContext(T)||r}const m=new WeakMap;function j(r){let e=m.get(r);return e||(e=new L(r),m.set(r,e)),e}function N(r){let{locale:e}=v(),t=l.useMemo(()=>j(r),[r]);return l.useMemo(()=>new D(e,t),[e,t])}function U(r={}){let{locale:e}=v();return l.useMemo(()=>new R(e,r),[e,r])}export{U as $,N as a,v as b};
