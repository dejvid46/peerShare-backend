import{r as i}from"./index.d496d5ee.js";import{W as c}from"./UseWebSocket.b87fe84a.js";function l(s,e){const[o,n]=i.useState([]),[a,r]=i.useState(c.instance.state);return i.useEffect(()=>{s&&c.instance.add(s,t=>n(f=>[...f,t])),c.instance.addStateListener(t=>{r(t)}),c.instance.state!==a&&r(c.instance.state)},[]),e&&i.useEffect(()=>{d(e,a)},[a]),{collector:o,add:t=>u(t,n),dropColector:()=>n([]),sendMess:t=>{d(t,a)},setCollector:n,state:a,remove:t=>m(t,o,n)}}function u(s,e){e(o=>[...o,s])}function d(s,e){e&&c.instance.sendMessage(s)}function m(s,e,o){const n=e.indexOf(s);if(n>-1){e.splice(n,1);const a=[...e];o(a)}}export{l as u};
